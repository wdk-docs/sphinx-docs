

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>sphinx.ext.doctest – Test snippets in the documentation &mdash; Sphinx 2.1.0+/77d104c 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx 2.1.0+/77d104c 文档 中搜索"
          href="../../_static/opensearch.xml"/>

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="搜索" href="../../search.html" />
    <link rel="next" title="sphinx.ext.extlinks – Markup to shorten external links" href="extlinks.html" />
    <link rel="prev" title="sphinx.ext.coverage – Collect doc coverage stats" href="coverage.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../contents.html" class="icon icon-home"> Sphinx
          

          
          </a>

          
            
            
              <div class="version">
                2.1.0+/77d104c
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../intro.html">介绍</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../restructuredtext/index.html">reStructuredText</a></li>
<li class="toctree-l1"><a class="reference internal" href="../markdown.html">Markdown</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configuration.html">配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="../builders/index.html">构建器</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">扩展</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#built-in-extensions">内置扩展</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="autodoc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autodoc</span></code> – 包括docstrings中的文档</a></li>
<li class="toctree-l3"><a class="reference internal" href="autosectionlabel.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autosectionlabel</span></code> – Allow reference sections using its title</a></li>
<li class="toctree-l3"><a class="reference internal" href="autosummary.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.autosummary</span></code> – Generate autodoc summaries</a></li>
<li class="toctree-l3"><a class="reference internal" href="coverage.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.coverage</span></code> – Collect doc coverage stats</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.doctest</span></code> – Test snippets in the documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#directives">Directives</a></li>
<li class="toctree-l4"><a class="reference internal" href="#skipping-tests-conditionally">Skipping tests conditionally</a></li>
<li class="toctree-l4"><a class="reference internal" href="#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="extlinks.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.extlinks</span></code> – Markup to shorten external links</a></li>
<li class="toctree-l3"><a class="reference internal" href="githubpages.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.githubpages</span></code> – Publish HTML docs in GitHub Pages</a></li>
<li class="toctree-l3"><a class="reference internal" href="graphviz.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.graphviz</span></code> – Add Graphviz graphs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ifconfig.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.ifconfig</span></code> – Include content based on configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="imgconverter.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.imgconverter</span></code> – A reference image converter using Imagemagick</a></li>
<li class="toctree-l3"><a class="reference internal" href="inheritance.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.inheritance_diagram</span></code> – Include inheritance diagrams</a></li>
<li class="toctree-l3"><a class="reference internal" href="intersphinx.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.intersphinx</span></code> – Link to other projects’ documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="linkcode.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.linkcode</span></code> – Add external links to source code</a></li>
<li class="toctree-l3"><a class="reference internal" href="math.html">Math support for HTML outputs in Sphinx</a></li>
<li class="toctree-l3"><a class="reference internal" href="napoleon.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.napoleon</span></code> – Support for NumPy and Google style docstrings</a></li>
<li class="toctree-l3"><a class="reference internal" href="todo.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.todo</span></code> – Support for todo items</a></li>
<li class="toctree-l3"><a class="reference internal" href="viewcode.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.viewcode</span></code> – Add links to highlighted source code</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#third-party-extensions">第三方扩展</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../theming.html">HTML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/intl.html">国际化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/setuptools.html">Setuptools集成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/websupport/index.html">Sphinx Web支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../man/index.html">手册页</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../theming.html">HTML主题支持</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../templating.html">模板</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../latex.html">LaTeX 定制</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../extdev/index.html">为Sphinx开发扩展</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/tutorials/index.html">扩展教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Sphinx 常问问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">词汇表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devguide.html">Sphinx开发人员指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changes.html">Sphinx更新</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">使用Sphinx的项目</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../authors.html">Sphinx作者</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../contents.html">Sphinx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../contents.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">扩展</a> &raquo;</li>
        
      <li><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.doctest</span></code> – Test snippets in the documentation</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/usage/extensions/doctest.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-sphinx.ext.doctest">
<span id="sphinx-ext-doctest-test-snippets-in-the-documentation"></span><h1><a class="reference internal" href="#module-sphinx.ext.doctest" title="sphinx.ext.doctest: Test snippets in the documentation."><code class="xref py py-mod docutils literal notranslate"><span class="pre">sphinx.ext.doctest</span></code></a> – Test snippets in the documentation<a class="headerlink" href="#module-sphinx.ext.doctest" title="永久链接至标题">¶</a></h1>
<p id="index-0">This extension allows you to test snippets in the documentation in a natural
way.  It works by collecting specially-marked up code blocks and running them as
doctest tests.</p>
<p>Within one document, test code is partitioned in <em>groups</em>, where each group
consists of:</p>
<ul class="simple">
<li><p>zero or more <em>setup code</em> blocks (e.g. importing the module to test)</p></li>
<li><p>one or more <em>test</em> blocks</p></li>
</ul>
<p>When building the docs with the <code class="docutils literal notranslate"><span class="pre">doctest</span></code> builder, groups are collected for
each document and run one after the other, first executing setup code blocks,
then the test blocks in the order they appear in the file.</p>
<p>There are two kinds of test blocks:</p>
<ul class="simple">
<li><p><em>doctest-style</em> blocks mimic interactive sessions by interleaving Python code
(including the interpreter prompt) and output.</p></li>
<li><p><em>code-output-style</em> blocks consist of an ordinary piece of Python code, and
optionally, a piece of output for that code.</p></li>
</ul>
<div class="section" id="directives">
<h2>Directives<a class="headerlink" href="#directives" title="永久链接至标题">¶</a></h2>
<p>The <em>group</em> argument below is interpreted as follows: if it is empty, the block
is assigned to the group named <code class="docutils literal notranslate"><span class="pre">default</span></code>.  If it is <code class="docutils literal notranslate"><span class="pre">*</span></code>, the block is
assigned to all groups (including the <code class="docutils literal notranslate"><span class="pre">default</span></code> group).  Otherwise, it must be
a comma-separated list of group names.</p>
<dl class="directive">
<dt id="directive-testsetup">
<code class="descname">.. testsetup::</code><code class="descclassname"> [group]</code><a class="headerlink" href="#directive-testsetup" title="永久链接至目标">¶</a></dt>
<dd><p>A setup code block.  This code is not shown in the output for other builders,
but executed before the doctests of the group(s) it belongs to.</p>
</dd></dl>

<dl class="directive">
<dt id="directive-testcleanup">
<code class="descname">.. testcleanup::</code><code class="descclassname"> [group]</code><a class="headerlink" href="#directive-testcleanup" title="永久链接至目标">¶</a></dt>
<dd><p>A cleanup code block.  This code is not shown in the output for other
builders, but executed after the doctests of the group(s) it belongs to.</p>
<div class="versionadded">
<p><span class="versionmodified added">1.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="directive">
<dt id="directive-doctest">
<code class="descname">.. doctest::</code><code class="descclassname"> [group]</code><a class="headerlink" href="#directive-doctest" title="永久链接至目标">¶</a></dt>
<dd><p>A doctest-style code block.  You can use standard <code class="xref py py-mod docutils literal notranslate"><span class="pre">doctest</span></code> flags for
controlling how actual output is compared with what you give as output.  The
default set of flags is specified by the <a class="reference internal" href="#confval-doctest_default_flags"><code class="xref std std-confval docutils literal notranslate"><span class="pre">doctest_default_flags</span></code></a>
configuration variable.</p>
<p>This directive supports three options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">hide</span></code>, a flag option, hides the doctest block in other builders.  By
default it is shown as a highlighted doctest block.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>, a string option, can be used to give a comma-separated list of
doctest flags that apply to each example in the tests.  (You still can give
explicit flags per example, with doctest comments, but they will show up in
other builders too.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pyversion</span></code>, a string option, can be used to specify the required Python
version for the example to be tested. For instance, in the following case
the example will be tested only for Python versions greater than 3.3:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">doctest</span><span class="p">::</span>
   <span class="nc">:pyversion:</span> <span class="nf">&gt; 3.3</span>
</pre></div>
</div>
<p>The following operands are supported:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">~=</span></code>: Compatible release clause</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">==</span></code>: Version matching clause</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">!=</span></code>: Version exclusion clause</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>: Inclusive ordered comparison clause</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>: Exclusive ordered comparison clause</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">===</span></code>: Arbitrary equality clause.</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">pyversion</span></code> option is followed <a class="reference external" href="https://www.python.org/dev/peps/pep-0440/#version-specifiers">PEP-440: Version Specifiers</a>.</p>
<div class="versionadded">
<p><span class="versionmodified added">1.6 新版功能.</span></p>
</div>
<div class="versionchanged">
<p><span class="versionmodified changed">在 1.7 版更改: </span>Supported PEP-440 operands and notations</p>
</div>
</li>
</ul>
<p>Note that like with standard doctests, you have to use <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code> to
signal a blank line in the expected output.  The <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code> is removed
when building presentation output (HTML, LaTeX etc.).</p>
<p>Also, you can give inline doctest options, like in doctest:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>&gt;&gt;&gt; datetime.date.now()   # doctest: +SKIP
datetime.date(2008, 1, 1)
</pre></div>
</div>
<p>They will be respected when the test is run, but stripped from presentation
output.</p>
</dd></dl>

<dl class="directive">
<dt id="directive-testcode">
<code class="descname">.. testcode::</code><code class="descclassname"> [group]</code><a class="headerlink" href="#directive-testcode" title="永久链接至目标">¶</a></dt>
<dd><p>A code block for a code-output-style test.</p>
<p>This directive supports one option:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hide</span></code>, a flag option, hides the code block in other builders.  By
default it is shown as a highlighted code block.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注解</p>
<p>Code in a <code class="docutils literal notranslate"><span class="pre">testcode</span></code> block is always executed all at once, no matter how
many statements it contains.  Therefore, output will <em>not</em> be generated
for bare expressions – use <code class="docutils literal notranslate"><span class="pre">print</span></code>.  Example:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">testcode</span><span class="p">::</span>

   1+1        # this will give no output!
   print 2+2  # this will give output

<span class="p">..</span> <span class="ow">testoutput</span><span class="p">::</span>

   4
</pre></div>
</div>
<p>Also, please be aware that since the doctest module does not support
mixing regular output and an exception message in the same snippet, this
applies to testcode/testoutput as well.</p>
</div>
</dd></dl>

<dl class="directive">
<dt id="directive-testoutput">
<code class="descname">.. testoutput::</code><code class="descclassname"> [group]</code><a class="headerlink" href="#directive-testoutput" title="永久链接至目标">¶</a></dt>
<dd><p>The corresponding output, or the exception message, for the last
<a class="reference internal" href="#directive-testcode" title="testcode directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testcode</span></code></a> block.</p>
<p>This directive supports two options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hide</span></code>, a flag option, hides the output block in other builders.  By
default it is shown as a literal block without highlighting.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">options</span></code>, a string option, can be used to give doctest flags
(comma-separated) just like in normal doctest blocks.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">testcode</span><span class="p">::</span>

   print &#39;Output     text.&#39;

<span class="p">..</span> <span class="ow">testoutput</span><span class="p">::</span>
   <span class="nc">:hide:</span>
   <span class="nc">:options:</span> <span class="nf">-ELLIPSIS, +NORMALIZE_WHITESPACE</span>

   Output text.
</pre></div>
</div>
</dd></dl>

<p>The following is an example for the usage of the directives.  The test via
<a class="reference internal" href="#directive-doctest" title="doctest directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">doctest</span></code></a> and the test via <a class="reference internal" href="#directive-testcode" title="testcode directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testcode</span></code></a> and
<a class="reference internal" href="#directive-testoutput" title="testoutput directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testoutput</span></code></a> are equivalent.</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span><span class="gh">The parrot module</span>
<span class="gh">=================</span>

<span class="p">..</span> <span class="ow">testsetup</span><span class="p">::</span> *

   import parrot

The parrot module is a module about parrots.

Doctest example:

<span class="p">..</span> <span class="ow">doctest</span><span class="p">::</span>

   &gt;&gt;&gt; parrot.voom(3000)
   This parrot wouldn&#39;t voom if you put 3000 volts through it!

Test-Output example:

<span class="p">..</span> <span class="ow">testcode</span><span class="p">::</span>

   parrot.voom(3000)

This would output:

<span class="p">..</span> <span class="ow">testoutput</span><span class="p">::</span>

   This parrot wouldn&#39;t voom if you put 3000 volts through it!
</pre></div>
</div>
</div>
<div class="section" id="skipping-tests-conditionally">
<h2>Skipping tests conditionally<a class="headerlink" href="#skipping-tests-conditionally" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">skipif</span></code>, a string option, can be used to skip directives conditionally. This
may be useful e.g. when a different set of tests should be run depending on the
environment (hardware, network/VPN, optional dependencies or different versions
of dependencies). The <code class="docutils literal notranslate"><span class="pre">skipif</span></code> option is supported by all of the doctest
directives. Below are typical use cases for <code class="docutils literal notranslate"><span class="pre">skipif</span></code> when used for different
directives:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#directive-testsetup" title="testsetup directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testsetup</span></code></a> and <a class="reference internal" href="#directive-testcleanup" title="testcleanup directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testcleanup</span></code></a></p>
<ul>
<li><p>conditionally skip test setup and/or cleanup</p></li>
<li><p>customize setup/cleanup code per environment</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#directive-doctest" title="doctest directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">doctest</span></code></a></p>
<ul>
<li><p>conditionally skip both a test and its output verification</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#directive-testcode" title="testcode directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testcode</span></code></a></p>
<ul>
<li><p>conditionally skip a test</p></li>
<li><p>customize test code per environment</p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#directive-testoutput" title="testoutput directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">testoutput</span></code></a></p>
<ul>
<li><p>conditionally skip output assertion for a skipped test</p></li>
<li><p>expect different output depending on the environment</p></li>
</ul>
</li>
</ul>
<p>The value of the <code class="docutils literal notranslate"><span class="pre">skipif</span></code> option is evaluated as a Python expression. If the
result is a true value, the directive is omitted from the test run just as if
it wasn’t present in the file at all.</p>
<p>Instead of repeating an expression, the <a class="reference internal" href="#confval-doctest_global_setup"><code class="xref std std-confval docutils literal notranslate"><span class="pre">doctest_global_setup</span></code></a>
configuration option can be used to assign it to a variable which can then be
used instead.</p>
<p>Here’s an example which skips some tests if Pandas is not installed:</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">conf.py</span><a class="headerlink" href="#id1" title="永久链接至代码">¶</a></div>
<div class="highlight-py notranslate"><div class="highlight"><pre><span></span><span class="n">extensions</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sphinx.ext.doctest&#39;</span><span class="p">]</span>
<span class="n">doctest_global_setup</span> <span class="o">=</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">try:</span>
<span class="s1">    import pandas as pd</span>
<span class="s1">except ImportError:</span>
<span class="s1">    pd = None</span>
<span class="s1">&#39;&#39;&#39;</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">contents.rst</span><a class="headerlink" href="#id2" title="永久链接至代码">¶</a></div>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">testsetup</span><span class="p">::</span>
   <span class="nc">:skipif:</span> <span class="nf">pd is None</span>

   data = pd.Series([42])

<span class="p">..</span> <span class="ow">doctest</span><span class="p">::</span>
   <span class="nc">:skipif:</span> <span class="nf">pd is None</span>

   &gt;&gt;&gt; data.iloc[0]
   42

<span class="p">..</span> <span class="ow">testcode</span><span class="p">::</span>
   <span class="nc">:skipif:</span> <span class="nf">pd is None</span>

   print(data.iloc[-1])

<span class="p">..</span> <span class="ow">testoutput</span><span class="p">::</span>
   <span class="nc">:skipif:</span> <span class="nf">pd is None</span>

   42
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration<a class="headerlink" href="#configuration" title="永久链接至标题">¶</a></h2>
<p>The doctest extension uses the following configuration values:</p>
<dl class="confval">
<dt id="confval-doctest_default_flags">
<code class="descname">doctest_default_flags</code><a class="headerlink" href="#confval-doctest_default_flags" title="永久链接至目标">¶</a></dt>
<dd><p>By default, these options are enabled:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ELLIPSIS</span></code>, allowing you to put ellipses in the expected output that
match anything in the actual output;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IGNORE_EXCEPTION_DETAIL</span></code>, causing everything following the leftmost
colon and any module information in the exception name to be ignored;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">DONT_ACCEPT_TRUE_FOR_1</span></code>, rejecting “True” in the output where “1” is
given – the default behavior of accepting this substitution is a relic of
pre-Python 2.2 times.</p></li>
</ul>
<div class="versionadded">
<p><span class="versionmodified added">1.5 新版功能.</span></p>
</div>
</dd></dl>

<dl class="confval">
<dt id="confval-doctest_path">
<code class="descname">doctest_path</code><a class="headerlink" href="#confval-doctest_path" title="永久链接至目标">¶</a></dt>
<dd><p>A list of directories that will be added to <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.path</span></code> when the doctest
builder is used.  (Make sure it contains absolute paths.)</p>
</dd></dl>

<dl class="confval">
<dt id="confval-doctest_global_setup">
<code class="descname">doctest_global_setup</code><a class="headerlink" href="#confval-doctest_global_setup" title="永久链接至目标">¶</a></dt>
<dd><p>Python code that is treated like it were put in a <code class="docutils literal notranslate"><span class="pre">testsetup</span></code> directive for
<em>every</em> file that is tested, and for every group.  You can use this to
e.g. import modules you will always need in your doctests.</p>
<div class="versionadded">
<p><span class="versionmodified added">0.6 新版功能.</span></p>
</div>
</dd></dl>

<dl class="confval">
<dt id="confval-doctest_global_cleanup">
<code class="descname">doctest_global_cleanup</code><a class="headerlink" href="#confval-doctest_global_cleanup" title="永久链接至目标">¶</a></dt>
<dd><p>Python code that is treated like it were put in a <code class="docutils literal notranslate"><span class="pre">testcleanup</span></code> directive
for <em>every</em> file that is tested, and for every group.  You can use this to
e.g. remove any temporary files that the tests leave behind.</p>
<div class="versionadded">
<p><span class="versionmodified added">1.1 新版功能.</span></p>
</div>
</dd></dl>

<dl class="confval">
<dt id="confval-doctest_test_doctest_blocks">
<code class="descname">doctest_test_doctest_blocks</code><a class="headerlink" href="#confval-doctest_test_doctest_blocks" title="永久链接至目标">¶</a></dt>
<dd><p>If this is a nonempty string (the default is <code class="docutils literal notranslate"><span class="pre">'default'</span></code>), standard reST
doctest blocks will be tested too.  They will be assigned to the group name
given.</p>
<p>reST doctest blocks are simply doctests put into a paragraph of their own,
like so:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>Some documentation text.

&gt;&gt;&gt; print 1
1

Some more documentation text.
</pre></div>
</div>
<p>(Note that no special <code class="docutils literal notranslate"><span class="pre">::</span></code> is used to introduce a doctest block; docutils
recognizes them from the leading <code class="docutils literal notranslate"><span class="pre">&gt;&gt;&gt;</span></code>.  Also, no additional indentation is
used, though it doesn’t hurt.)</p>
<p>If this value is left at its default value, the above snippet is interpreted
by the doctest builder exactly like the following:</p>
<div class="highlight-rest notranslate"><div class="highlight"><pre><span></span>Some documentation text.

<span class="p">..</span> <span class="ow">doctest</span><span class="p">::</span>

   &gt;&gt;&gt; print 1
   1

Some more documentation text.
</pre></div>
</div>
<p>This feature makes it easy for you to test doctests in docstrings included
with the <a class="reference internal" href="autodoc.html#module-sphinx.ext.autodoc" title="sphinx.ext.autodoc: Include documentation from docstrings."><code class="xref py py-mod docutils literal notranslate"><span class="pre">autodoc</span></code></a> extension without marking them up with a
special directive.</p>
<p>Note though that you can’t have blank lines in reST doctest blocks.  They
will be interpreted as one block ending and another one starting.  Also,
removal of <code class="docutils literal notranslate"><span class="pre">&lt;BLANKLINE&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span> <span class="pre">doctest:</span></code> options only works in
<a class="reference internal" href="#directive-doctest" title="doctest directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">doctest</span></code></a> blocks, though you may set <a class="reference internal" href="../configuration.html#confval-trim_doctest_flags"><code class="xref std std-confval docutils literal notranslate"><span class="pre">trim_doctest_flags</span></code></a>
to achieve that in all code blocks with Python console content.</p>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="extlinks.html" class="btn btn-neutral float-right" title="sphinx.ext.extlinks – Markup to shorten external links" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coverage.html" class="btn btn-neutral float-left" title="sphinx.ext.coverage – Collect doc coverage stats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2007-2019, Georg Brandl and the Sphinx team

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>