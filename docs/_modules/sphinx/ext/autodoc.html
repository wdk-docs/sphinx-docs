
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <title>sphinx.ext.autodoc &#8212; Sphinx 2.1.0+/41035e8f9 文档</title>
    <link rel="stylesheet" href="../../../_static/sphinx13.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="search" type="application/opensearchdescription+xml"
          title="在 Sphinx 2.1.0+/41035e8f9 文档 中搜索"
          href="../../../_static/opensearch.xml"/>

    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="搜索" href="../../../search.html" />
<link rel="canonical" href="http://www.sphinx-doc.org/en/master/_modules/sphinx/ext/autodoc.html" />

<link href='https://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css' />
 
<style type="text/css">
  table.right {
    float: right;
    margin-left: 20px;
  }

  table.right td {
    border: 1px solid #ccc;
  }

    {
    % if pagename=='index'%
  }

  .related {
    display: none;
  }

    {
    % endif %
  }
</style>
<script type="text/javascript">
  // intelligent scrolling of the sidebar content
  $(window).scroll(function () {
    var sb = $('.sphinxsidebarwrapper');
    var win = $(window);
    var sbh = sb.height();
    var offset = $('.sphinxsidebar').position()['top'];
    var wintop = win.scrollTop();
    var winbot = wintop + win.innerHeight();
    var curtop = sb.position()['top'];
    var curbot = curtop + sbh;
    // does sidebar fit in window?
    if (sbh < win.innerHeight()) {
      // yes: easy case -- always keep at the top
      sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
        $(document).height() - sbh - 200
      ]));
    } else {
      // no: only scroll if top/bottom edge of sidebar is at
      // top/bottom edge of window
      if (curtop > wintop && curbot > winbot) {
        sb.css('top', $u.max([wintop - offset - 10, 0]));
      } else if (curtop < wintop && curbot < winbot) {
        sb.css('top', $u.min([winbot - sbh - offset - 20,
          $(document).height() - sbh - 200
        ]));
      }
    }
  });
</script>

  </head><body>
<div class="pageheader">
  <ul>
    <li><a href="../../../index.html">主页</a></li>
    <li><a href="../../../usage/installation.html">安装</a></li>
    <li><a href="../../../contents.html">文档</a></li>
    <li><a href="../../../develop.html">扩展/开发</a></li>
  </ul>
  <div>
    <a href="../../../index.html">
      <img src="../../../_static/sphinxheader.png" alt="SPHINX" />
    </a>
  </div>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="总目录"
             accesskey="I">索引</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
<li><a href="../../../index.html">主页</a>&#160;|</li>
<li><a href="../../../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../../index.html" accesskey="U">模块代码</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>sphinx.ext.autodoc 源代码</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    sphinx.ext.autodoc</span>
<span class="sd">    ~~~~~~~~~~~~~~~~~~</span>

<span class="sd">    Automatically insert docstrings for functions, classes or whole modules into</span>
<span class="sd">    the doctree, thus avoiding duplication between docstrings and documentation</span>
<span class="sd">    for those who like elaborate docstrings.</span>

<span class="sd">    :copyright: Copyright 2007-2019 by the Sphinx team, see AUTHORS.</span>
<span class="sd">    :license: BSD, see LICENSE for details.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Any</span>

<span class="kn">from</span> <span class="nn">docutils.statemachine</span> <span class="k">import</span> <span class="n">StringList</span>

<span class="kn">import</span> <span class="nn">sphinx</span>
<span class="kn">from</span> <span class="nn">sphinx.deprecation</span> <span class="k">import</span> <span class="p">(</span>
    <span class="n">RemovedInSphinx30Warning</span><span class="p">,</span> <span class="n">RemovedInSphinx40Warning</span><span class="p">,</span> <span class="n">deprecated_alias</span>
<span class="p">)</span>
<span class="kn">from</span> <span class="nn">sphinx.ext.autodoc.importer</span> <span class="k">import</span> <span class="n">import_object</span><span class="p">,</span> <span class="n">get_object_members</span>
<span class="kn">from</span> <span class="nn">sphinx.ext.autodoc.mock</span> <span class="k">import</span> <span class="n">mock</span>
<span class="kn">from</span> <span class="nn">sphinx.locale</span> <span class="k">import</span> <span class="n">_</span><span class="p">,</span> <span class="n">__</span>
<span class="kn">from</span> <span class="nn">sphinx.pycode</span> <span class="k">import</span> <span class="n">ModuleAnalyzer</span><span class="p">,</span> <span class="n">PycodeError</span>
<span class="kn">from</span> <span class="nn">sphinx.util</span> <span class="k">import</span> <span class="n">logging</span>
<span class="kn">from</span> <span class="nn">sphinx.util</span> <span class="k">import</span> <span class="n">rpartition</span>
<span class="kn">from</span> <span class="nn">sphinx.util.docstrings</span> <span class="k">import</span> <span class="n">prepare_docstring</span>
<span class="kn">from</span> <span class="nn">sphinx.util.inspect</span> <span class="k">import</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">isdescriptor</span><span class="p">,</span> <span class="n">safe_getmembers</span><span class="p">,</span> \
    <span class="n">safe_getattr</span><span class="p">,</span> <span class="n">object_description</span><span class="p">,</span> <span class="n">is_builtin_class_method</span><span class="p">,</span> \
    <span class="n">isenumattribute</span><span class="p">,</span> <span class="n">isclassmethod</span><span class="p">,</span> <span class="n">isstaticmethod</span><span class="p">,</span> <span class="n">isfunction</span><span class="p">,</span> <span class="n">isbuiltin</span><span class="p">,</span> <span class="n">ispartial</span><span class="p">,</span> <span class="n">getdoc</span>

<span class="k">if</span> <span class="kc">False</span><span class="p">:</span>
    <span class="c1"># For type annotation</span>
    <span class="kn">from</span> <span class="nn">types</span> <span class="k">import</span> <span class="n">ModuleType</span>  <span class="c1"># NOQA</span>
    <span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Callable</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Iterator</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">Sequence</span><span class="p">,</span> <span class="n">Set</span><span class="p">,</span> <span class="n">Tuple</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">Union</span>  <span class="c1"># NOQA</span>
    <span class="kn">from</span> <span class="nn">sphinx.application</span> <span class="k">import</span> <span class="n">Sphinx</span>  <span class="c1"># NOQA</span>
    <span class="kn">from</span> <span class="nn">sphinx.config</span> <span class="k">import</span> <span class="n">Config</span>  <span class="c1"># NOQA</span>
    <span class="kn">from</span> <span class="nn">sphinx.environment</span> <span class="k">import</span> <span class="n">BuildEnvironment</span>  <span class="c1"># NOQA</span>
    <span class="kn">from</span> <span class="nn">sphinx.ext.autodoc.directive</span> <span class="k">import</span> <span class="n">DocumenterBridge</span>  <span class="c1"># NOQA</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>


<span class="c1"># This type isn&#39;t exposed directly in any modules, but can be found</span>
<span class="c1"># here in most Python versions</span>
<span class="n">MethodDescriptorType</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="nb">type</span><span class="o">.</span><span class="n">__subclasses__</span><span class="p">)</span>


<span class="c1">#: extended signature RE: with explicit module name separated by ::</span>
<span class="n">py_ext_sig_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
    <span class="sa">r</span><span class="sd">&#39;&#39;&#39;^ ([\w.]+::)?            # explicit module name</span>
<span class="sd">          ([\w.]+\.)?            # module and/or class name(s)</span>
<span class="sd">          (\w+)  \s*             # thing name</span>
<span class="sd">          (?: \((.*)\)           # optional: arguments</span>
<span class="sd">           (?:\s* -&gt; \s* (.*))?  #           return annotation</span>
<span class="sd">          )? $                   # and nothing more</span>
<span class="sd">          &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">identity</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="c1"># type: (Any) -&gt; Any</span>
    <span class="k">return</span> <span class="n">x</span>


<span class="n">ALL</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>
<span class="n">INSTANCEATTR</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">members_option</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="c1"># type: (Any) -&gt; Union[object, List[str]]</span>
    <span class="sd">&quot;&quot;&quot;Used to convert the :members: option to auto directives.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ALL</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>


<span class="k">def</span> <span class="nf">members_set_option</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="c1"># type: (Any) -&gt; Union[object, Set[str]]</span>
    <span class="sd">&quot;&quot;&quot;Used to convert the :members: option to auto directives.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ALL</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">x</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">arg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)}</span>


<span class="n">SUPPRESS</span> <span class="o">=</span> <span class="nb">object</span><span class="p">()</span>


<span class="k">def</span> <span class="nf">annotation_option</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="c1"># type: (Any) -&gt; Any</span>
    <span class="k">if</span> <span class="n">arg</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="c1"># suppress showing the representation of the object</span>
        <span class="k">return</span> <span class="n">SUPPRESS</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">arg</span>


<span class="k">def</span> <span class="nf">bool_option</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="c1"># type: (Any) -&gt; bool</span>
    <span class="sd">&quot;&quot;&quot;Used to convert flag options to auto directives.  (Instead of</span>
<span class="sd">    directives.flag(), which returns None).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="kc">True</span>


<span class="k">def</span> <span class="nf">merge_special_members_option</span><span class="p">(</span><span class="n">options</span><span class="p">):</span>
    <span class="c1"># type: (Dict) -&gt; None</span>
    <span class="sd">&quot;&quot;&quot;Merge :special-members: option to :members: option.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s1">&#39;special-members&#39;</span> <span class="ow">in</span> <span class="n">options</span> <span class="ow">and</span> <span class="n">options</span><span class="p">[</span><span class="s1">&#39;special-members&#39;</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ALL</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">ALL</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">options</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;members&#39;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">member</span> <span class="ow">in</span> <span class="n">options</span><span class="p">[</span><span class="s1">&#39;special-members&#39;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">member</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">options</span><span class="p">[</span><span class="s1">&#39;members&#39;</span><span class="p">]:</span>
                    <span class="n">options</span><span class="p">[</span><span class="s1">&#39;members&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">options</span><span class="p">[</span><span class="s1">&#39;members&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">options</span><span class="p">[</span><span class="s1">&#39;special-members&#39;</span><span class="p">]</span>


<span class="c1"># Some useful event listener factories for autodoc-process-docstring.</span>

<div class="viewcode-block" id="cut_lines"><a class="viewcode-back" href="../../../usage/extensions/autodoc.html#sphinx.ext.autodoc.cut_lines">[文档]</a><span class="k">def</span> <span class="nf">cut_lines</span><span class="p">(</span><span class="n">pre</span><span class="p">,</span> <span class="n">post</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># type: (int, int, str) -&gt; Callable</span>
    <span class="sd">&quot;&quot;&quot;Return a listener that removes the first *pre* and last *post*</span>
<span class="sd">    lines of every docstring.  If *what* is a sequence of strings,</span>
<span class="sd">    only docstrings of a type in *what* will be processed.</span>

<span class="sd">    Use like this (e.g. in the ``setup()`` function of :file:`conf.py`)::</span>

<span class="sd">       from sphinx.ext.autodoc import cut_lines</span>
<span class="sd">       app.connect(&#39;autodoc-process-docstring&#39;, cut_lines(4, what=[&#39;module&#39;]))</span>

<span class="sd">    This can (and should) be used in place of :confval:`automodule_skip_lines`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">what_</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="c1"># type: (Sphinx, str, str, Any, Any, List[str]) -&gt; None</span>
        <span class="k">if</span> <span class="n">what</span> <span class="ow">and</span> <span class="n">what_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">what</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">del</span> <span class="n">lines</span><span class="p">[:</span><span class="n">pre</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">post</span><span class="p">:</span>
            <span class="c1"># remove one trailing blank line.</span>
            <span class="k">if</span> <span class="n">lines</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
            <span class="k">del</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="n">post</span><span class="p">:]</span>
        <span class="c1"># make sure there is a blank line at the end</span>
        <span class="k">if</span> <span class="n">lines</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">process</span></div>


<div class="viewcode-block" id="between"><a class="viewcode-back" href="../../../usage/extensions/autodoc.html#sphinx.ext.autodoc.between">[文档]</a><span class="k">def</span> <span class="nf">between</span><span class="p">(</span><span class="n">marker</span><span class="p">,</span> <span class="n">what</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keepempty</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">exclude</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
    <span class="c1"># type: (str, Sequence[str], bool, bool) -&gt; Callable</span>
    <span class="sd">&quot;&quot;&quot;Return a listener that either keeps, or if *exclude* is True excludes,</span>
<span class="sd">    lines between lines that match the *marker* regular expression.  If no line</span>
<span class="sd">    matches, the resulting docstring would be empty, so no change will be made</span>
<span class="sd">    unless *keepempty* is true.</span>

<span class="sd">    If *what* is a sequence of strings, only docstrings of a type in *what* will</span>
<span class="sd">    be processed.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">marker_re</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">process</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">what_</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">options</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>
        <span class="c1"># type: (Sphinx, str, str, Any, Any, List[str]) -&gt; None</span>
        <span class="k">if</span> <span class="n">what</span> <span class="ow">and</span> <span class="n">what_</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">what</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">deleted</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">delete</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">exclude</span>
        <span class="n">orig_lines</span> <span class="o">=</span> <span class="n">lines</span><span class="p">[:]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">orig_lines</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
                <span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">deleted</span><span class="p">)</span>
                <span class="n">deleted</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="n">marker_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
                <span class="n">delete</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">delete</span>
                <span class="k">if</span> <span class="n">delete</span><span class="p">:</span>
                    <span class="n">lines</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="n">deleted</span><span class="p">)</span>
                    <span class="n">deleted</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">lines</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">keepempty</span><span class="p">:</span>
            <span class="n">lines</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">orig_lines</span>
        <span class="c1"># make sure there is a blank line at the end</span>
        <span class="k">if</span> <span class="n">lines</span> <span class="ow">and</span> <span class="n">lines</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
            <span class="n">lines</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">process</span></div>


<span class="c1"># This class is used only in ``sphinx.ext.autodoc.directive``,</span>
<span class="c1"># But we define this class here to keep compatibility (see #4538)</span>
<span class="k">class</span> <span class="nc">Options</span><span class="p">(</span><span class="nb">dict</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dict/attribute hybrid that returns None on nonexisting keys.&quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__getattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; Any</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="p">[</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">)]</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">Documenter</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A Documenter knows how to autodocument a single object type.  When</span>
<span class="sd">    registered with the AutoDirective, it will be used to document objects</span>
<span class="sd">    of that type when needed by autodoc.</span>

<span class="sd">    Its *objtype* attribute selects what auto directive it is assigned to</span>
<span class="sd">    (the directive name is &#39;auto&#39; + objtype), and what directive it generates</span>
<span class="sd">    by default, though that can be overridden by an attribute called</span>
<span class="sd">    *directivetype*.</span>

<span class="sd">    A Documenter has an *option_spec* that works like a docutils directive&#39;s;</span>
<span class="sd">    in fact, it will be used to parse an auto directive&#39;s options that matches</span>
<span class="sd">    the documenter.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#: name by which the directive is called (auto...) and the default</span>
    <span class="c1">#: generated directive name</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;object&#39;</span>
    <span class="c1">#: indentation by which to indent the directive content</span>
    <span class="n">content_indent</span> <span class="o">=</span> <span class="s1">&#39;   &#39;</span>
    <span class="c1">#: priority if multiple documenters return True from can_document_member</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#: order if autodoc_member_order is set to &#39;groupwise&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="c1">#: true if the generated content may contain titles</span>
    <span class="n">titles_allowed</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">option_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;noindex&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">}</span>  <span class="c1"># type: Dict[str, Callable]</span>

    <span class="k">def</span> <span class="nf">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">defargs</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, Any) -&gt; Any</span>
        <span class="sd">&quot;&quot;&quot;getattr() override for types such as Zope interfaces.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">autodoc_attrgetter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">defargs</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Called to see if a member can be documented by this documenter.&quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented in subclasses&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">directive</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="c1"># type: (DocumenterBridge, str, str) -&gt; None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directive</span> <span class="o">=</span> <span class="n">directive</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span> <span class="o">=</span> <span class="n">directive</span><span class="o">.</span><span class="n">env</span>    <span class="c1"># type: BuildEnvironment</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">directive</span><span class="o">.</span><span class="n">genopt</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">=</span> <span class="n">indent</span>
        <span class="c1"># the module and object path within the module, and the fully</span>
        <span class="c1"># qualified name (all set after resolve_name succeeds)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">modname</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># type: str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">module</span> <span class="o">=</span> <span class="kc">None</span>          <span class="c1"># type: ModuleType</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span> <span class="o">=</span> <span class="kc">None</span>         <span class="c1"># type: List[str]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span> <span class="o">=</span> <span class="kc">None</span>        <span class="c1"># type: str</span>
        <span class="c1"># extra signature items (arguments and return annotation,</span>
        <span class="c1"># also set after resolve_name succeeds)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="kc">None</span>            <span class="c1"># type: str</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">retann</span> <span class="o">=</span> <span class="kc">None</span>          <span class="c1"># type: str</span>
        <span class="c1"># the object to document (set after import_object succeeds)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="kc">None</span>          <span class="c1"># type: Any</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">object_name</span> <span class="o">=</span> <span class="kc">None</span>     <span class="c1"># type: str</span>
        <span class="c1"># the parent/owner of the object to document</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>          <span class="c1"># type: Any</span>
        <span class="c1"># the module analyzer to get at attribute docs, or None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="kc">None</span>        <span class="c1"># type: ModuleAnalyzer</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">documenters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Dict[str, Type[Documenter]]</span>
        <span class="sd">&quot;&quot;&quot;Returns registered Documenter classes&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">get_documenters</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">lineno</span><span class="p">):</span>
        <span class="c1"># type: (str, str, int) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Append one line of generated reST to the output.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">directive</span><span class="o">.</span><span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">+</span> <span class="n">line</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="o">*</span><span class="n">lineno</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">resolve_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
        <span class="c1"># type: (str, Any, str, Any) -&gt; Tuple[str, List[str]]</span>
        <span class="sd">&quot;&quot;&quot;Resolve the module and name of the object to document given by the</span>
<span class="sd">        arguments and the current module/class.</span>

<span class="sd">        Must return a pair of the module name and a chain of attributes; for</span>
<span class="sd">        example, it would return ``(&#39;zipfile&#39;, [&#39;ZipFile&#39;, &#39;open&#39;])`` for the</span>
<span class="sd">        ``zipfile.ZipFile.open`` method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="s1">&#39;must be implemented in subclasses&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">parse_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Determine what module to import and what attribute to document.</span>

<span class="sd">        Returns True and sets *self.modname*, *self.objpath*, *self.fullname*,</span>
<span class="sd">        *self.args* and *self.retann* if parsing and resolving was successful.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># first, parse the definition -- auto directives for classes and</span>
        <span class="c1"># functions can contain a signature which is then used instead of</span>
        <span class="c1"># an autogenerated one</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">explicit_modname</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">retann</span> <span class="o">=</span> \
                <span class="n">py_ext_sig_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;invalid signature for auto</span><span class="si">%s</span><span class="s1"> (</span><span class="si">%r</span><span class="s1">)&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                           <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="c1"># support explicit module and class name separation via ::</span>
        <span class="k">if</span> <span class="n">explicit_modname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">modname</span> <span class="o">=</span> <span class="n">explicit_modname</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">parents</span> <span class="o">=</span> <span class="n">path</span> <span class="ow">and</span> <span class="n">path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">modname</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">parents</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">modname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">resolve_name</span><span class="p">(</span><span class="n">modname</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">retann</span> <span class="o">=</span> <span class="n">retann</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modname</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> \
                        <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span> <span class="ow">and</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">import_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Import the object given by *self.modname* and *self.objpath* and set</span>
<span class="sd">        it as *self.object*.</span>

<span class="sd">        Returns True if successful, False if an error occurred.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="n">mock</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_mock_imports</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ret</span> <span class="o">=</span> <span class="n">import_object</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span>
                                    <span class="n">attrgetter</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">,</span>
                                    <span class="n">warningiserror</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_warningiserror</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">object_name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">ret</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">except</span> <span class="ne">ImportError</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">exc</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">,</span> <span class="n">subtype</span><span class="o">=</span><span class="s1">&#39;import_object&#39;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">note_reread</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">get_real_modname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Get the real module name of an object to document.</span>

<span class="sd">        It can differ from the name of the module through which the object was</span>
<span class="sd">        imported.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span>

    <span class="k">def</span> <span class="nf">check_module</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Check if *self.object* is really defined in the module given by</span>
<span class="sd">        *self.modname*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">imported_members</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>

        <span class="n">modname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ispartial</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span> <span class="n">modname</span> <span class="o">==</span> <span class="s1">&#39;_functools&#39;</span><span class="p">:</span>  <span class="c1"># for pypy</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">elif</span> <span class="n">modname</span> <span class="ow">and</span> <span class="n">modname</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">format_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Format the argument signature of *self.object*.</span>

<span class="sd">        Should return None if the object does not have a signature.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">format_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Format the name of *self.object*.</span>

<span class="sd">        This normally should be something that can be parsed by the generated</span>
<span class="sd">        directive, but doesn&#39;t need to be (Sphinx will display it unparsed</span>
<span class="sd">        then).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># normally the name doesn&#39;t contain the module (except for module</span>
        <span class="c1"># directives of course)</span>
        <span class="k">return</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span>

    <span class="k">def</span> <span class="nf">format_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="sd">&quot;&quot;&quot;Format the signature (arguments and return annotation) of the object.</span>

<span class="sd">        Let the user process it via the ``autodoc-process-signature`` event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># signature given explicitly</span>
            <span class="n">args</span> <span class="o">=</span> <span class="s2">&quot;(</span><span class="si">%s</span><span class="s2">)&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># try to introspect the signature</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;error while formatting arguments for </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span>
                               <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span> <span class="n">err</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
                <span class="n">args</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">retann</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">retann</span>

        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">emit_firstresult</span><span class="p">(</span>
            <span class="s1">&#39;autodoc-process-signature&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">retann</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">result</span><span class="p">:</span>
            <span class="n">args</span><span class="p">,</span> <span class="n">retann</span> <span class="o">=</span> <span class="n">result</span>

        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">args</span> <span class="o">+</span> <span class="p">(</span><span class="n">retann</span> <span class="ow">and</span> <span class="p">(</span><span class="s1">&#39; -&gt; </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">retann</span><span class="p">)</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

    <span class="k">def</span> <span class="nf">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Add the directive header and options to the generated content.&quot;&quot;&quot;</span>
        <span class="n">domain</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;domain&#39;</span><span class="p">,</span> <span class="s1">&#39;py&#39;</span><span class="p">)</span>
        <span class="n">directive</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;directivetype&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">)</span>
        <span class="n">name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_name</span><span class="p">()</span>
        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;.. </span><span class="si">%s</span><span class="s1">:</span><span class="si">%s</span><span class="s1">:: </span><span class="si">%s%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">domain</span><span class="p">,</span> <span class="n">directive</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">sig</span><span class="p">),</span>
                      <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">noindex</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :noindex:&#39;</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">:</span>
            <span class="c1"># Be explicit about the module, this is necessary since .. class::</span>
            <span class="c1"># etc. don&#39;t support a prepended module name</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :module: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># type: (str, int) -&gt; List[List[str]]</span>
        <span class="sd">&quot;&quot;&quot;Decode and return lines of the docstring(s) for the object.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The &#39;encoding&#39; argument to autodoc.</span><span class="si">%s</span><span class="s2">.get_doc() is deprecated.&quot;</span>
                          <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                          <span class="n">RemovedInSphinx40Warning</span><span class="p">)</span>
        <span class="n">docstring</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">,</span>
                           <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_inherit_docstrings</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">docstring</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">prepare_docstring</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)]</span>
        <span class="k">return</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">process_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">docstrings</span><span class="p">):</span>
        <span class="c1"># type: (List[List[str]]) -&gt; Iterator[str]</span>
        <span class="sd">&quot;&quot;&quot;Let the user process the docstrings before adding them.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">docstringlines</span> <span class="ow">in</span> <span class="n">docstrings</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="p">:</span>
                <span class="c1"># let extensions preprocess docstrings</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">emit</span><span class="p">(</span><span class="s1">&#39;autodoc-process-docstring&#39;</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span>
                                  <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">,</span> <span class="n">docstringlines</span><span class="p">)</span>
            <span class="k">yield from</span> <span class="n">docstringlines</span>

    <span class="k">def</span> <span class="nf">get_sourcename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">:docstring of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">srcname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">)</span>
        <span class="k">return</span> <span class="s1">&#39;docstring of </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span>

    <span class="k">def</span> <span class="nf">add_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, bool) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Add content from docstrings, attribute documentation and user.&quot;&quot;&quot;</span>
        <span class="c1"># set sourcename and add content from attribute documentation</span>
        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">:</span>
            <span class="n">attr_docs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">find_attr_docs</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">:</span>
                <span class="n">key</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]),</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">attr_docs</span><span class="p">:</span>
                    <span class="n">no_docstring</span> <span class="o">=</span> <span class="kc">True</span>
                    <span class="n">docstrings</span> <span class="o">=</span> <span class="p">[</span><span class="n">attr_docs</span><span class="p">[</span><span class="n">key</span><span class="p">]]</span>
                    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process_doc</span><span class="p">(</span><span class="n">docstrings</span><span class="p">)):</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="c1"># add content from docstrings</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">no_docstring</span><span class="p">:</span>
            <span class="n">docstrings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_doc</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">docstrings</span><span class="p">:</span>
                <span class="c1"># append at least a dummy docstring, so that the event</span>
                <span class="c1"># autodoc-process-docstring is fired and can add some</span>
                <span class="c1"># content if desired</span>
                <span class="n">docstrings</span><span class="o">.</span><span class="n">append</span><span class="p">([])</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">process_doc</span><span class="p">(</span><span class="n">docstrings</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>

        <span class="c1"># add additional content (e.g. from document), if present</span>
        <span class="k">if</span> <span class="n">more_content</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">line</span><span class="p">,</span> <span class="n">src</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">more_content</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">more_content</span><span class="o">.</span><span class="n">items</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">src</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">src</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">get_object_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">want_all</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; Tuple[bool, List[Tuple[str, Any]]]</span>
        <span class="sd">&quot;&quot;&quot;Return `(members_check_module, members)` where `members` is a</span>
<span class="sd">        list of `(membername, member)` pairs of the members of *self.object*.</span>

<span class="sd">        If *want_all* is True, return all members.  Else, only return those</span>
<span class="sd">        members given by *self.options.members* (which may also be none).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">members</span> <span class="o">=</span> <span class="n">get_object_members</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">want_all</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">members</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="p">[]</span>
            <span class="c1"># specific members given</span>
            <span class="n">selected</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">members</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
                    <span class="n">selected</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">name</span><span class="p">,</span> <span class="n">members</span><span class="p">[</span><span class="n">name</span><span class="p">]</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;missing attribute </span><span class="si">%s</span><span class="s1"> in object </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span>
                                   <span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">),</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">selected</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">inherited_members</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">((</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">members</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="nb">sorted</span><span class="p">((</span><span class="n">m</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">m</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">members</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                                 <span class="k">if</span> <span class="n">m</span><span class="o">.</span><span class="n">directly_defined</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">filter_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">members</span><span class="p">,</span> <span class="n">want_all</span><span class="p">):</span>
        <span class="c1"># type: (List[Tuple[str, Any]], bool) -&gt; List[Tuple[str, Any, bool]]</span>
        <span class="sd">&quot;&quot;&quot;Filter the given member list.</span>

<span class="sd">        Members are skipped if</span>

<span class="sd">        - they are private (except if given explicitly or the private-members</span>
<span class="sd">          option is set)</span>
<span class="sd">        - they are special methods (except if given explicitly or the</span>
<span class="sd">          special-members option is set)</span>
<span class="sd">        - they are undocumented (except if the undoc-members option is set)</span>

<span class="sd">        The user can override the skipping decision by connecting to the</span>
<span class="sd">        ``autodoc-skip-member`` event.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c1"># search for members in source code too</span>
        <span class="n">namespace</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">)</span>  <span class="c1"># will be empty for modules</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">:</span>
            <span class="n">attr_docs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">find_attr_docs</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attr_docs</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># process members and determine which to skip</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">membername</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span> <span class="ow">in</span> <span class="n">members</span><span class="p">:</span>
            <span class="c1"># if isattr is True, the member is documented as an attribute</span>
            <span class="n">isattr</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="n">doc</span> <span class="o">=</span> <span class="n">getdoc</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_inherit_docstrings</span><span class="p">)</span>

            <span class="c1"># if the member __doc__ is the same as self&#39;s __doc__, it&#39;s just</span>
            <span class="c1"># inherited and therefore not the member&#39;s doc</span>
            <span class="bp">cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="s1">&#39;__class__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="bp">cls</span><span class="p">:</span>
                <span class="n">cls_doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">cls_doc</span> <span class="o">==</span> <span class="n">doc</span><span class="p">:</span>
                    <span class="n">doc</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">has_doc</span> <span class="o">=</span> <span class="nb">bool</span><span class="p">(</span><span class="n">doc</span><span class="p">)</span>

            <span class="n">keep</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">want_all</span> <span class="ow">and</span> <span class="n">membername</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> \
                    <span class="n">membername</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">membername</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">:</span>
                <span class="c1"># special __methods__</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">special_members</span> <span class="ow">is</span> <span class="n">ALL</span> <span class="ow">and</span> \
                        <span class="n">membername</span> <span class="o">!=</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">:</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="n">has_doc</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">undoc_members</span>
                <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">special_members</span> <span class="ow">and</span> \
                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">special_members</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">ALL</span> <span class="ow">and</span> \
                        <span class="n">membername</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">special_members</span><span class="p">:</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="n">has_doc</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">undoc_members</span>
            <span class="k">elif</span> <span class="p">(</span><span class="n">namespace</span><span class="p">,</span> <span class="n">membername</span><span class="p">)</span> <span class="ow">in</span> <span class="n">attr_docs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">want_all</span> <span class="ow">and</span> <span class="n">membername</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
                    <span class="c1"># ignore members whose name starts with _ by default</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">private_members</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># keep documented attributes</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="n">isattr</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="n">want_all</span> <span class="ow">and</span> <span class="n">membername</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;_&#39;</span><span class="p">):</span>
                <span class="c1"># ignore members whose name starts with _ by default</span>
                <span class="n">keep</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">private_members</span> <span class="ow">and</span> \
                    <span class="p">(</span><span class="n">has_doc</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">undoc_members</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># ignore undocumented members if :undoc-members: is not given</span>
                <span class="n">keep</span> <span class="o">=</span> <span class="n">has_doc</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">undoc_members</span>

            <span class="c1"># give the user a chance to decide whether this member</span>
            <span class="c1"># should be skipped</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="p">:</span>
                <span class="c1"># let extensions preprocess docstrings</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">skip_user</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">emit_firstresult</span><span class="p">(</span>
                        <span class="s1">&#39;autodoc-skip-member&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span>
                        <span class="ow">not</span> <span class="n">keep</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">skip_user</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">keep</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">skip_user</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;autodoc: failed to determine </span><span class="si">%r</span><span class="s1"> to be documented.&#39;</span>
                                      <span class="s1">&#39;the following exception was raised:</span><span class="se">\n</span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">),</span>
                                   <span class="n">member</span><span class="p">,</span> <span class="n">exc</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
                    <span class="n">keep</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">keep</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">membername</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">isattr</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Generate reST for member documentation.</span>

<span class="sd">        If *all_members* is True, do all members, else those given by</span>
<span class="sd">        *self.options.members*.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># set current namespace for finding members</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="p">[</span><span class="s1">&#39;autodoc:module&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="p">[</span><span class="s1">&#39;autodoc:class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">want_all</span> <span class="o">=</span> <span class="n">all_members</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">inherited_members</span> <span class="ow">or</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">members</span> <span class="ow">is</span> <span class="n">ALL</span>
        <span class="c1"># find out which members are documentable</span>
        <span class="n">members_check_module</span><span class="p">,</span> <span class="n">members</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_object_members</span><span class="p">(</span><span class="n">want_all</span><span class="p">)</span>

        <span class="c1"># remove members given by exclude-members</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exclude_members</span><span class="p">:</span>
            <span class="n">members</span> <span class="o">=</span> <span class="p">[</span>
                <span class="p">(</span><span class="n">membername</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">membername</span><span class="p">,</span> <span class="n">member</span><span class="p">)</span> <span class="ow">in</span> <span class="n">members</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exclude_members</span> <span class="ow">is</span> <span class="n">ALL</span> <span class="ow">or</span>
                    <span class="n">membername</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">exclude_members</span>
                <span class="p">)</span>
            <span class="p">]</span>

        <span class="c1"># document non-skipped members</span>
        <span class="n">memberdocumenters</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># type: List[Tuple[Documenter, bool]]</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">mname</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">isattr</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">filter_members</span><span class="p">(</span><span class="n">members</span><span class="p">,</span> <span class="n">want_all</span><span class="p">):</span>
            <span class="n">classes</span> <span class="o">=</span> <span class="p">[</span><span class="bp">cls</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">documenters</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
                       <span class="k">if</span> <span class="bp">cls</span><span class="o">.</span><span class="n">can_document_member</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="n">mname</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="bp">self</span><span class="p">)]</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">classes</span><span class="p">:</span>
                <span class="c1"># don&#39;t know how to document this member</span>
                <span class="k">continue</span>
            <span class="c1"># prefer the documenter with the highest priority</span>
            <span class="n">classes</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="bp">cls</span><span class="p">:</span> <span class="bp">cls</span><span class="o">.</span><span class="n">priority</span><span class="p">)</span>
            <span class="c1"># give explicitly separated module name, so that members</span>
            <span class="c1"># of inner classes can be documented</span>
            <span class="n">full_mname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span> <span class="o">+</span> <span class="s1">&#39;::&#39;</span> <span class="o">+</span> \
                <span class="s1">&#39;.&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span> <span class="o">+</span> <span class="p">[</span><span class="n">mname</span><span class="p">])</span>
            <span class="n">documenter</span> <span class="o">=</span> <span class="n">classes</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">](</span><span class="bp">self</span><span class="o">.</span><span class="n">directive</span><span class="p">,</span> <span class="n">full_mname</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">indent</span><span class="p">)</span>
            <span class="n">memberdocumenters</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">documenter</span><span class="p">,</span> <span class="n">isattr</span><span class="p">))</span>
        <span class="n">member_order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">member_order</span> <span class="ow">or</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_member_order</span>
        <span class="k">if</span> <span class="n">member_order</span> <span class="o">==</span> <span class="s1">&#39;groupwise&#39;</span><span class="p">:</span>
            <span class="c1"># sort by group; relies on stable sort to keep items in the</span>
            <span class="c1"># same group sorted alphabetically</span>
            <span class="n">memberdocumenters</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">member_order</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">member_order</span> <span class="o">==</span> <span class="s1">&#39;bysource&#39;</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="p">:</span>
            <span class="c1"># sort by source order, by virtue of the module analyzer</span>
            <span class="n">tagorder</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">tagorder</span>

            <span class="k">def</span> <span class="nf">keyfunc</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
                <span class="c1"># type: (Tuple[Documenter, bool]) -&gt; int</span>
                <span class="n">fullname</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">name</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;::&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">return</span> <span class="n">tagorder</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">fullname</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">tagorder</span><span class="p">))</span>
            <span class="n">memberdocumenters</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="n">keyfunc</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">documenter</span><span class="p">,</span> <span class="n">isattr</span> <span class="ow">in</span> <span class="n">memberdocumenters</span><span class="p">:</span>
            <span class="n">documenter</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span>
                <span class="n">all_members</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">real_modname</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">real_modname</span><span class="p">,</span>
                <span class="n">check_module</span><span class="o">=</span><span class="n">members_check_module</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">isattr</span><span class="p">)</span>

        <span class="c1"># reset current objects</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="p">[</span><span class="s1">&#39;autodoc:module&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="p">[</span><span class="s1">&#39;autodoc:class&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">real_modname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">check_module</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, bool) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Generate reST for the object given by *self.name*, and possibly for</span>
<span class="sd">        its members.</span>

<span class="sd">        If *more_content* is given, include that content. If *real_modname* is</span>
<span class="sd">        given, use that module name to find attribute docs. If *check_module* is</span>
<span class="sd">        True, only generate if the object is defined in the module name it is</span>
<span class="sd">        imported from. If *all_members* is True, document all members.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse_name</span><span class="p">():</span>
            <span class="c1"># need a module to import</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="n">__</span><span class="p">(</span><span class="s1">&#39;don</span><span class="se">\&#39;</span><span class="s1">t know which module to import for autodocumenting &#39;</span>
                   <span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> (try placing a &quot;module&quot; or &quot;currentmodule&quot; directive &#39;</span>
                   <span class="s1">&#39;in the document, or giving an explicit module name)&#39;</span><span class="p">)</span> <span class="o">%</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># now, import the module and get object to document</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">import_object</span><span class="p">():</span>
            <span class="k">return</span>

        <span class="c1"># If there is no real module defined, figure out which to use.</span>
        <span class="c1"># The real module is used in the module analyzer to look up the module</span>
        <span class="c1"># where the attribute documentation would actually be found in.</span>
        <span class="c1"># This is used for situations where you have a module that collects the</span>
        <span class="c1"># functions and classes of internal submodules.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">real_modname</span> <span class="o">=</span> <span class="n">real_modname</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_real_modname</span><span class="p">()</span>  <span class="c1"># type: str</span>

        <span class="c1"># try to also get a source code analyzer for attribute docs</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="n">ModuleAnalyzer</span><span class="o">.</span><span class="n">for_module</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">real_modname</span><span class="p">)</span>
            <span class="c1"># parse right now, to get PycodeErrors on parsing (results will</span>
            <span class="c1"># be cached anyway)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">find_attr_docs</span><span class="p">()</span>
        <span class="k">except</span> <span class="n">PycodeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="s1">&#39;[autodoc] module analyzer failed: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">err</span><span class="p">)</span>
            <span class="c1"># no source file -- e.g. for builtin and C modules</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="c1"># at least add the module.__file__ as a dependency</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="p">,</span> <span class="s1">&#39;__file__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">directive</span><span class="o">.</span><span class="n">filename_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">module</span><span class="o">.</span><span class="vm">__file__</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directive</span><span class="o">.</span><span class="n">filename_set</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">analyzer</span><span class="o">.</span><span class="n">srcname</span><span class="p">)</span>

        <span class="c1"># check __module__ of object (for members not given explicitly)</span>
        <span class="k">if</span> <span class="n">check_module</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_module</span><span class="p">():</span>
                <span class="k">return</span>

        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>

        <span class="c1"># make sure that the result starts with an empty line.  This is</span>
        <span class="c1"># necessary for some situations where another directive preprocesses</span>
        <span class="c1"># reST and no starting newline is present</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>

        <span class="c1"># format the object&#39;s signature, if any</span>
        <span class="n">sig</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">format_signature</span><span class="p">()</span>

        <span class="c1"># generate the directive header and options, if applicable</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_directive_header</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>

        <span class="c1"># e.g. the module directive doesn&#39;t have content</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">indent</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">content_indent</span>

        <span class="c1"># add all content (from docstrings, attribute docs etc.)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">more_content</span><span class="p">)</span>

        <span class="c1"># document members, if possible</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">document_members</span><span class="p">(</span><span class="n">all_members</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ModuleDocumenter</span><span class="p">(</span><span class="n">Documenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for modules.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;module&#39;</span>
    <span class="n">content_indent</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">titles_allowed</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="n">option_spec</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;members&#39;</span><span class="p">:</span> <span class="n">members_option</span><span class="p">,</span> <span class="s1">&#39;undoc-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span>
        <span class="s1">&#39;noindex&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;inherited-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span>
        <span class="s1">&#39;show-inheritance&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;synopsis&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span>
        <span class="s1">&#39;platform&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span> <span class="s1">&#39;deprecated&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span>
        <span class="s1">&#39;member-order&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span> <span class="s1">&#39;exclude-members&#39;</span><span class="p">:</span> <span class="n">members_set_option</span><span class="p">,</span>
        <span class="s1">&#39;private-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;special-members&#39;</span><span class="p">:</span> <span class="n">members_option</span><span class="p">,</span>
        <span class="s1">&#39;imported-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;ignore-module-all&#39;</span><span class="p">:</span> <span class="n">bool_option</span>
    <span class="p">}</span>  <span class="c1"># type: Dict[str, Callable]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c1"># type: (Any) -&gt; None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">merge_special_members_option</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="c1"># don&#39;t document submodules automatically</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">resolve_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
        <span class="c1"># type: (str, Any, str, Any) -&gt; Tuple[str, List[str]]</span>
        <span class="k">if</span> <span class="n">modname</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;&quot;::&quot; in automodule name doesn</span><span class="se">\&#39;</span><span class="s1">t make sense&#39;</span><span class="p">),</span>
                           <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">path</span> <span class="ow">or</span> <span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="n">base</span><span class="p">,</span> <span class="p">[]</span>

    <span class="k">def</span> <span class="nf">parse_name</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">parse_name</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">retann</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="n">__</span><span class="p">(</span><span class="s1">&#39;signature arguments or return annotation &#39;</span>
                              <span class="s1">&#39;given for automodule </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">,</span>
                           <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; None</span>
        <span class="n">Documenter</span><span class="o">.</span><span class="n">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">)</span>

        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>

        <span class="c1"># add some module-specific options</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">synopsis</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :synopsis: &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">synopsis</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">platform</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :platform: &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">platform</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">deprecated</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :deprecated:&#39;</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_object_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">want_all</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; Tuple[bool, List[Tuple[str, object]]]</span>
        <span class="k">if</span> <span class="n">want_all</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">ignore_module_all</span> <span class="ow">or</span> <span class="ow">not</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__all__&#39;</span><span class="p">)):</span>
                <span class="c1"># for implicit module members, check __module__ to avoid</span>
                <span class="c1"># documenting imported objects</span>
                <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">safe_getmembers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">memberlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">__all__</span>
                <span class="c1"># Sometimes __all__ is broken...</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">memberlist</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">))</span> <span class="ow">or</span> <span class="ow">not</span> \
                   <span class="nb">all</span><span class="p">(</span><span class="nb">isinstance</span><span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">memberlist</span><span class="p">):</span>
                    <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                        <span class="n">__</span><span class="p">(</span><span class="s1">&#39;__all__ should be a list of strings, not </span><span class="si">%r</span><span class="s1"> &#39;</span>
                           <span class="s1">&#39;(in module </span><span class="si">%s</span><span class="s1">) -- ignoring __all__&#39;</span><span class="p">)</span> <span class="o">%</span>
                        <span class="p">(</span><span class="n">memberlist</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">fullname</span><span class="p">),</span>
                        <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span>
                    <span class="p">)</span>
                    <span class="c1"># fall back to all members</span>
                    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="n">safe_getmembers</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">memberlist</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">members</span> <span class="ow">or</span> <span class="p">[]</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">mname</span> <span class="ow">in</span> <span class="n">memberlist</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">ret</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">mname</span><span class="p">,</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="n">mname</span><span class="p">)))</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                    <span class="n">__</span><span class="p">(</span><span class="s1">&#39;missing attribute mentioned in :members: or __all__: &#39;</span>
                       <span class="s1">&#39;module </span><span class="si">%s</span><span class="s1">, attribute </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span>
                    <span class="p">(</span><span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="s1">&#39;???&#39;</span><span class="p">),</span> <span class="n">mname</span><span class="p">),</span>
                    <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span>
                <span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span><span class="p">,</span> <span class="n">ret</span>


<span class="k">class</span> <span class="nc">ModuleLevelDocumenter</span><span class="p">(</span><span class="n">Documenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for objects on module level (functions,</span>
<span class="sd">    classes, data/constants).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">resolve_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
        <span class="c1"># type: (str, Any, str, Any) -&gt; Tuple[str, List[str]]</span>
        <span class="k">if</span> <span class="n">modname</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
                <span class="n">modname</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># if documenting a toplevel object without explicit module,</span>
                <span class="c1"># it can be contained in another auto directive ...</span>
                <span class="n">modname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;autodoc:module&#39;</span><span class="p">)</span>
                <span class="c1"># ... or in the scope of a module directive</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">modname</span><span class="p">:</span>
                    <span class="n">modname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">ref_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;py:module&#39;</span><span class="p">)</span>
                <span class="c1"># ... else, it stays None, which means invalid</span>
        <span class="k">return</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span> <span class="o">+</span> <span class="p">[</span><span class="n">base</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">ClassLevelDocumenter</span><span class="p">(</span><span class="n">Documenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for objects on class level (methods,</span>
<span class="sd">    attributes).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">resolve_name</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">):</span>
        <span class="c1"># type: (str, Any, str, Any) -&gt; Tuple[str, List[str]]</span>
        <span class="k">if</span> <span class="n">modname</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">path</span><span class="p">:</span>
                <span class="n">mod_cls</span> <span class="o">=</span> <span class="n">path</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">mod_cls</span> <span class="o">=</span> <span class="kc">None</span>
                <span class="c1"># if documenting a class-level object without path,</span>
                <span class="c1"># there must be a current class, either from a parent</span>
                <span class="c1"># auto directive ...</span>
                <span class="n">mod_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;autodoc:class&#39;</span><span class="p">)</span>
                <span class="c1"># ... or from a class directive</span>
                <span class="k">if</span> <span class="n">mod_cls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">mod_cls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">ref_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;py:class&#39;</span><span class="p">)</span>
                <span class="c1"># ... if still None, there&#39;s no way to know</span>
                <span class="k">if</span> <span class="n">mod_cls</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="p">[]</span>
            <span class="n">modname</span><span class="p">,</span> <span class="bp">cls</span> <span class="o">=</span> <span class="n">rpartition</span><span class="p">(</span><span class="n">mod_cls</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">parents</span> <span class="o">=</span> <span class="p">[</span><span class="bp">cls</span><span class="p">]</span>
            <span class="c1"># if the module name is still missing, get it like above</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">modname</span><span class="p">:</span>
                <span class="n">modname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">temp_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;autodoc:module&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">modname</span><span class="p">:</span>
                <span class="n">modname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">ref_context</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;py:module&#39;</span><span class="p">)</span>
            <span class="c1"># ... else, it stays None, which means invalid</span>
        <span class="k">return</span> <span class="n">modname</span><span class="p">,</span> <span class="n">parents</span> <span class="o">+</span> <span class="p">[</span><span class="n">base</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">DocstringSignatureMixin</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin for FunctionDocumenter and MethodDocumenter to provide the</span>
<span class="sd">    feature of reading the signature from the docstring.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_find_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; Tuple[str, str]</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The &#39;encoding&#39; argument to autodoc.</span><span class="si">%s</span><span class="s2">._find_signature() is &quot;</span>
                          <span class="s2">&quot;deprecated.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                          <span class="n">RemovedInSphinx40Warning</span><span class="p">)</span>
        <span class="n">docstrings</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_doc</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_new_docstrings</span> <span class="o">=</span> <span class="n">docstrings</span><span class="p">[:]</span>
        <span class="n">result</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">doclines</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">docstrings</span><span class="p">):</span>
            <span class="c1"># no lines in docstring, no match</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">doclines</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># match first line of docstring against signature RE</span>
            <span class="n">match</span> <span class="o">=</span> <span class="n">py_ext_sig_re</span><span class="o">.</span><span class="n">match</span><span class="p">(</span><span class="n">doclines</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">match</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="n">exmod</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">base</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">retann</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="n">groups</span><span class="p">()</span>
            <span class="c1"># the base name must match ours</span>
            <span class="n">valid_names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>  <span class="c1"># type: ignore</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ClassDocumenter</span><span class="p">):</span>
                <span class="n">valid_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;__init__&#39;</span><span class="p">)</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__mro__&#39;</span><span class="p">):</span>
                    <span class="n">valid_names</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span> <span class="k">for</span> <span class="bp">cls</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="vm">__mro__</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">base</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">valid_names</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="c1"># re-prepare docstring to ignore more leading indentation</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_new_docstrings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">prepare_docstring</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">doclines</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">args</span><span class="p">,</span> <span class="n">retann</span>
            <span class="c1"># don&#39;t look any further</span>
            <span class="k">break</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># type: (str, int) -&gt; List[List[str]]</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The &#39;encoding&#39; argument to autodoc.</span><span class="si">%s</span><span class="s2">.get_doc() is deprecated.&quot;</span>
                          <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                          <span class="n">RemovedInSphinx40Warning</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_new_docstrings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lines</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_doc</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="k">def</span> <span class="nf">format_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_docstring_signature</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="c1"># only act if a signature is not explicitly given already, and if</span>
            <span class="c1"># the feature is enabled</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_signature</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">retann</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format_signature</span><span class="p">()</span>  <span class="c1"># type: ignore</span>


<span class="k">class</span> <span class="nc">DocstringStripSignatureMixin</span><span class="p">(</span><span class="n">DocstringSignatureMixin</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Mixin for AttributeDocumenter to provide the</span>
<span class="sd">    feature of stripping any function signature from the docstring.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">format_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autodoc_docstring_signature</span><span class="p">:</span>  <span class="c1"># type: ignore</span>
            <span class="c1"># only act if a signature is not explicitly given already, and if</span>
            <span class="c1"># the feature is enabled</span>
            <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_find_signature</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="c1"># Discarding _args is a only difference with</span>
                <span class="c1"># DocstringSignatureMixin.format_signature.</span>
                <span class="c1"># Documenter.format_signature use self.args value to format.</span>
                <span class="n">_args</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">retann</span> <span class="o">=</span> <span class="n">result</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format_signature</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">FunctionDocumenter</span><span class="p">(</span><span class="n">DocstringSignatureMixin</span><span class="p">,</span> <span class="n">ModuleLevelDocumenter</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;function&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">30</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="k">return</span> <span class="n">isfunction</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="ow">or</span> <span class="n">isbuiltin</span><span class="p">(</span><span class="n">member</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">format_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="n">isbuiltin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethoddescriptor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">):</span>
            <span class="c1"># cannot introspect arguments of a C function or method</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">isfunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="ow">not</span> <span class="n">isbuiltin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isclass</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__call__&#39;</span><span class="p">)):</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="fm">__call__</span><span class="p">)</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">is_builtin_class_method</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">)</span> <span class="ow">and</span>
               <span class="n">is_builtin_class_method</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%r</span><span class="s1"> is a builtin class&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>

            <span class="c1"># if a class should be documented as function (yay duck</span>
            <span class="c1"># typing) we try to use the constructor signature as function</span>
            <span class="c1"># signature without the first argument.</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">sig</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="fm">__new__</span><span class="p">,</span> <span class="n">bound_method</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_retval</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
                <span class="n">sig</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="fm">__init__</span><span class="p">,</span> <span class="n">bound_method</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_retval</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="n">args</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>

        <span class="c1"># escape backslashes for reST</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\\\</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">DecoratorDocumenter</span><span class="p">(</span><span class="n">FunctionDocumenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for decorator functions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;decorator&#39;</span>

    <span class="c1"># must be lower than FunctionDocumenter</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">format_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
        <span class="k">if</span> <span class="s1">&#39;,&#39;</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">args</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>


<span class="k">class</span> <span class="nc">ClassDocumenter</span><span class="p">(</span><span class="n">DocstringSignatureMixin</span><span class="p">,</span> <span class="n">ModuleLevelDocumenter</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for classes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;class&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">option_spec</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;members&#39;</span><span class="p">:</span> <span class="n">members_option</span><span class="p">,</span> <span class="s1">&#39;undoc-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span>
        <span class="s1">&#39;noindex&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;inherited-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span>
        <span class="s1">&#39;show-inheritance&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;member-order&#39;</span><span class="p">:</span> <span class="n">identity</span><span class="p">,</span>
        <span class="s1">&#39;exclude-members&#39;</span><span class="p">:</span> <span class="n">members_set_option</span><span class="p">,</span>
        <span class="s1">&#39;private-members&#39;</span><span class="p">:</span> <span class="n">bool_option</span><span class="p">,</span> <span class="s1">&#39;special-members&#39;</span><span class="p">:</span> <span class="n">members_option</span><span class="p">,</span>
    <span class="p">}</span>  <span class="c1"># type: Dict[str, Callable]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">):</span>
        <span class="c1"># type: (Any) -&gt; None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="n">merge_special_members_option</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">import_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Any</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">import_object</span><span class="p">()</span>
        <span class="c1"># if the class is documented under another name, document it</span>
        <span class="c1"># as data/attribute</span>
        <span class="k">if</span> <span class="n">ret</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span> <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">objpath</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">format_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="c1"># for classes, the relevant signature is the __init__ method&#39;s</span>
        <span class="n">initmeth</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="c1"># classes without __init__ method, default __init__ or</span>
        <span class="c1"># __init__ written in C?</span>
        <span class="k">if</span> <span class="n">initmeth</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">or</span> \
                <span class="n">is_builtin_class_method</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">)</span> <span class="ow">or</span> \
                <span class="ow">not</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">initmeth</span><span class="p">)</span> <span class="ow">or</span> <span class="n">isfunction</span><span class="p">(</span><span class="n">initmeth</span><span class="p">)):</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">Signature</span><span class="p">(</span><span class="n">initmeth</span><span class="p">,</span> <span class="n">bound_method</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">has_retval</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="c1"># still not possible: happens e.g. for old-style classes</span>
            <span class="c1"># with __init__ in C</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">format_signature</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span><span class="p">:</span>
            <span class="k">return</span> <span class="s1">&#39;&#39;</span>

        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">format_signature</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directivetype</span> <span class="o">=</span> <span class="s1">&#39;attribute&#39;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_directive_header</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>

        <span class="c1"># add inheritance info, if wanted</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">show_inheritance</span><span class="p">:</span>
            <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__bases__&#39;</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">):</span>
                <span class="n">bases</span> <span class="o">=</span> <span class="p">[</span><span class="n">b</span><span class="o">.</span><span class="vm">__module__</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;__builtin__&#39;</span><span class="p">,</span> <span class="s1">&#39;builtins&#39;</span><span class="p">)</span> <span class="ow">and</span>
                         <span class="s1">&#39;:class:`</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="n">b</span><span class="o">.</span><span class="vm">__name__</span> <span class="ow">or</span>
                         <span class="s1">&#39;:class:`</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">`&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">b</span><span class="o">.</span><span class="vm">__module__</span><span class="p">,</span> <span class="n">b</span><span class="o">.</span><span class="vm">__name__</span><span class="p">)</span>
                         <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="vm">__bases__</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   &#39;</span> <span class="o">+</span> <span class="n">_</span><span class="p">(</span><span class="s1">&#39;Bases: </span><span class="si">%s</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">bases</span><span class="p">),</span>
                              <span class="n">sourcename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_doc</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">ignore</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
        <span class="c1"># type: (str, int) -&gt; List[List[str]]</span>
        <span class="k">if</span> <span class="n">encoding</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;The &#39;encoding&#39; argument to autodoc.</span><span class="si">%s</span><span class="s2">.get_doc() is deprecated.&quot;</span>
                          <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="p">,</span>
                          <span class="n">RemovedInSphinx40Warning</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s1">&#39;_new_docstrings&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">lines</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lines</span>

        <span class="n">content</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">config</span><span class="o">.</span><span class="n">autoclass_content</span>

        <span class="n">docstrings</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">attrdocstring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">attrdocstring</span><span class="p">:</span>
            <span class="n">docstrings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">attrdocstring</span><span class="p">)</span>

        <span class="c1"># for classes, what the &quot;docstring&quot; is can be controlled via a</span>
        <span class="c1"># config value; the default is only the class docstring</span>
        <span class="k">if</span> <span class="n">content</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="s1">&#39;init&#39;</span><span class="p">):</span>
            <span class="n">initdocstring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__init__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">)</span>
            <span class="c1"># for new-style classes, no __init__ means default __init__</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">initdocstring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                <span class="p">(</span><span class="n">initdocstring</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__init__</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span>  <span class="c1"># for pypy</span>
                 <span class="n">initdocstring</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__init__</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)):</span>  <span class="c1"># for !pypy</span>
                <span class="n">initdocstring</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">initdocstring</span><span class="p">:</span>
                <span class="c1"># try __new__</span>
                <span class="n">initdocstring</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__new__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="s1">&#39;__doc__&#39;</span><span class="p">)</span>
                <span class="c1"># for new-style classes, no __new__ means default __new__</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">initdocstring</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span>
                    <span class="p">(</span><span class="n">initdocstring</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="o">.</span><span class="vm">__doc__</span> <span class="ow">or</span>  <span class="c1"># for pypy</span>
                     <span class="n">initdocstring</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="nb">object</span><span class="o">.</span><span class="fm">__new__</span><span class="o">.</span><span class="vm">__doc__</span><span class="p">)):</span>  <span class="c1"># for !pypy</span>
                    <span class="n">initdocstring</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">initdocstring</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">content</span> <span class="o">==</span> <span class="s1">&#39;init&#39;</span><span class="p">:</span>
                    <span class="n">docstrings</span> <span class="o">=</span> <span class="p">[</span><span class="n">initdocstring</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">docstrings</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">initdocstring</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">prepare_docstring</span><span class="p">(</span><span class="n">docstring</span><span class="p">,</span> <span class="n">ignore</span><span class="p">)</span> <span class="k">for</span> <span class="n">docstring</span> <span class="ow">in</span> <span class="n">docstrings</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">add_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, bool) -&gt; None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span><span class="p">:</span>
            <span class="n">classname</span> <span class="o">=</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__qualname__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">classname</span><span class="p">:</span>
                <span class="n">classname</span> <span class="o">=</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__name__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">classname</span><span class="p">:</span>
                <span class="n">module</span> <span class="o">=</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="n">parentmodule</span> <span class="o">=</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">module</span> <span class="ow">and</span> <span class="n">module</span> <span class="o">!=</span> <span class="n">parentmodule</span><span class="p">:</span>
                    <span class="n">classname</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">module</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">classname</span><span class="p">)</span>
                <span class="n">content</span> <span class="o">=</span> <span class="n">StringList</span><span class="p">([</span><span class="n">_</span><span class="p">(</span><span class="s1">&#39;alias of :class:`</span><span class="si">%s</span><span class="s1">`&#39;</span><span class="p">)</span> <span class="o">%</span> <span class="n">classname</span><span class="p">],</span> <span class="n">source</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">more_content</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">doc_as_attr</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">document_members</span><span class="p">(</span><span class="n">all_members</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">generate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">real_modname</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
                 <span class="n">check_module</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, bool) -&gt; None</span>
        <span class="c1"># Do not pass real_modname and use the name from the __module__</span>
        <span class="c1"># attribute of the class.</span>
        <span class="c1"># If a class gets imported into the module real_modname</span>
        <span class="c1"># the analyzer won&#39;t find the source of the class, if</span>
        <span class="c1"># it looks in real_modname.</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">more_content</span><span class="o">=</span><span class="n">more_content</span><span class="p">,</span>
                                <span class="n">check_module</span><span class="o">=</span><span class="n">check_module</span><span class="p">,</span>
                                <span class="n">all_members</span><span class="o">=</span><span class="n">all_members</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">ExceptionDocumenter</span><span class="p">(</span><span class="n">ClassDocumenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized ClassDocumenter subclass for exceptions.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;exception&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="c1"># needs a higher priority than ClassDocumenter</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="ne">BaseException</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">DataDocumenter</span><span class="p">(</span><span class="n">ModuleLevelDocumenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for data items.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;data&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>
    <span class="n">option_spec</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ModuleLevelDocumenter</span><span class="o">.</span><span class="n">option_spec</span><span class="p">)</span>
    <span class="n">option_spec</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotation_option</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ModuleDocumenter</span><span class="p">)</span> <span class="ow">and</span> <span class="n">isattr</span>

    <span class="k">def</span> <span class="nf">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_directive_header</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>
        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">objrepr</span> <span class="o">=</span> <span class="n">object_description</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :annotation: = &#39;</span> <span class="o">+</span> <span class="n">objrepr</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span> <span class="ow">is</span> <span class="n">SUPPRESS</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :annotation: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span>
                          <span class="n">sourcename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">get_real_modname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> \
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span>


<span class="k">class</span> <span class="nc">MethodDocumenter</span><span class="p">(</span><span class="n">DocstringSignatureMixin</span><span class="p">,</span> <span class="n">ClassLevelDocumenter</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for methods (normal, static and class).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;method&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># must be more than FunctionDocumenter</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="k">return</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isroutine</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="ow">and</span> \
            <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ModuleDocumenter</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">import_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Any</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">import_object</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">ret</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">ret</span>

        <span class="c1"># to distinguish classmethod/staticmethod</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="vm">__dict__</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span>

        <span class="k">if</span> <span class="n">isclassmethod</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directivetype</span> <span class="o">=</span> <span class="s1">&#39;classmethod&#39;</span>
            <span class="c1"># document class and static members before ordinary ones</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">member_order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">member_order</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">elif</span> <span class="n">isstaticmethod</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_name</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directivetype</span> <span class="o">=</span> <span class="s1">&#39;staticmethod&#39;</span>
            <span class="c1"># document class and static members before ordinary ones</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">member_order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">member_order</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">directivetype</span> <span class="o">=</span> <span class="s1">&#39;method&#39;</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">format_args</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">if</span> <span class="n">isbuiltin</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethoddescriptor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">):</span>
            <span class="c1"># can never get arguments of a C function or method</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">isstaticmethod</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">object_name</span><span class="p">):</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="n">bound_method</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">args</span> <span class="o">=</span> <span class="n">Signature</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="n">bound_method</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">format_args</span><span class="p">()</span>
        <span class="c1"># escape backslashes for reST</span>
        <span class="n">args</span> <span class="o">=</span> <span class="n">args</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\\\\</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">args</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">AttributeDocumenter</span><span class="p">(</span><span class="n">DocstringStripSignatureMixin</span><span class="p">,</span> <span class="n">ClassLevelDocumenter</span><span class="p">):</span>  <span class="c1"># type: ignore</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for attributes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;attribute&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">60</span>
    <span class="n">option_spec</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">ModuleLevelDocumenter</span><span class="o">.</span><span class="n">option_spec</span><span class="p">)</span>
    <span class="n">option_spec</span><span class="p">[</span><span class="s2">&quot;annotation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">annotation_option</span>

    <span class="c1"># must be higher than the MethodDocumenter, else it will recognize</span>
    <span class="c1"># some non-data descriptors as methods</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="mi">10</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">is_function_or_method</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
        <span class="c1"># type: (Any) -&gt; bool</span>
        <span class="k">return</span> <span class="n">isfunction</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="n">isbuiltin</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span> <span class="ow">or</span> <span class="n">inspect</span><span class="o">.</span><span class="n">ismethod</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="n">non_attr_types</span> <span class="o">=</span> <span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">MethodDescriptorType</span><span class="p">)</span>
        <span class="n">isdatadesc</span> <span class="o">=</span> <span class="n">isdescriptor</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> \
            <span class="bp">cls</span><span class="o">.</span><span class="n">is_function_or_method</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> \
            <span class="nb">isinstance</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="n">non_attr_types</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> \
            <span class="nb">type</span><span class="p">(</span><span class="n">member</span><span class="p">)</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;instancemethod&quot;</span>
        <span class="c1"># That last condition addresses an obscure case of C-defined</span>
        <span class="c1"># methods using a deprecated type in Python 3, that is not otherwise</span>
        <span class="c1"># exported anywhere by Python</span>
        <span class="k">return</span> <span class="n">isdatadesc</span> <span class="ow">or</span> <span class="p">(</span><span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">ModuleDocumenter</span><span class="p">)</span> <span class="ow">and</span>
                              <span class="ow">not</span> <span class="n">inspect</span><span class="o">.</span><span class="n">isroutine</span><span class="p">(</span><span class="n">member</span><span class="p">)</span> <span class="ow">and</span>
                              <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">member</span><span class="p">,</span> <span class="nb">type</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">document_members</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">all_members</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (bool) -&gt; None</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">import_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; Any</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">import_object</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">isenumattribute</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="n">isdescriptor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span> <span class="ow">and</span> \
                <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_function_or_method</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_datadescriptor</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># if it&#39;s not a data descriptor</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_datadescriptor</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="n">ret</span>

    <span class="k">def</span> <span class="nf">get_real_modname</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; str</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_attr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">,</span> <span class="s1">&#39;__module__&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> \
            <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modname</span>

    <span class="k">def</span> <span class="nf">add_directive_header</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sig</span><span class="p">):</span>
        <span class="c1"># type: (str) -&gt; None</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_directive_header</span><span class="p">(</span><span class="n">sig</span><span class="p">)</span>
        <span class="n">sourcename</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_sourcename</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_datadescriptor</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">objrepr</span> <span class="o">=</span> <span class="n">object_description</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">object</span><span class="p">)</span>
                <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :annotation: = &#39;</span> <span class="o">+</span> <span class="n">objrepr</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span> <span class="ow">is</span> <span class="n">SUPPRESS</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_line</span><span class="p">(</span><span class="s1">&#39;   :annotation: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">annotation</span><span class="p">,</span> <span class="n">sourcename</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, bool) -&gt; None</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_datadescriptor</span><span class="p">:</span>
            <span class="c1"># if it&#39;s not a data descriptor, its docstring is very probably the</span>
            <span class="c1"># wrong thing to display</span>
            <span class="n">no_docstring</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">InstanceAttributeDocumenter</span><span class="p">(</span><span class="n">AttributeDocumenter</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Specialized Documenter subclass for attributes that cannot be imported</span>
<span class="sd">    because they are instance attributes (e.g. assigned in __init__).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;instanceattribute&#39;</span>
    <span class="n">directivetype</span> <span class="o">=</span> <span class="s1">&#39;attribute&#39;</span>
    <span class="n">member_order</span> <span class="o">=</span> <span class="mi">60</span>

    <span class="c1"># must be higher than AttributeDocumenter</span>
    <span class="n">priority</span> <span class="o">=</span> <span class="mi">11</span>

    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">can_document_member</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">member</span><span class="p">,</span> <span class="n">membername</span><span class="p">,</span> <span class="n">isattr</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
        <span class="c1"># type: (Any, str, bool, Any) -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;This documents only INSTANCEATTR members.&quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">isattr</span> <span class="ow">and</span> <span class="p">(</span><span class="n">member</span> <span class="ow">is</span> <span class="n">INSTANCEATTR</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">import_object</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># type: () -&gt; bool</span>
        <span class="sd">&quot;&quot;&quot;Never import anything.&quot;&quot;&quot;</span>
        <span class="c1"># disguise as an attribute</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">objtype</span> <span class="o">=</span> <span class="s1">&#39;attribute&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_datadescriptor</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">add_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="c1"># type: (Any, bool) -&gt; None</span>
        <span class="sd">&quot;&quot;&quot;Never try to get a docstring from the object.&quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_content</span><span class="p">(</span><span class="n">more_content</span><span class="p">,</span> <span class="n">no_docstring</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_documenters</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="c1"># type: (Sphinx) -&gt; Dict[str, Type[Documenter]]</span>
    <span class="sd">&quot;&quot;&quot;Returns registered Documenter classes&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">app</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">documenters</span>


<span class="k">def</span> <span class="nf">autodoc_attrgetter</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">defargs</span><span class="p">):</span>
    <span class="c1"># type: (Sphinx, Any, str, Any) -&gt; Any</span>
    <span class="sd">&quot;&quot;&quot;Alternative getattr() for types&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">typ</span><span class="p">,</span> <span class="n">func</span> <span class="ow">in</span> <span class="n">app</span><span class="o">.</span><span class="n">registry</span><span class="o">.</span><span class="n">autodoc_attrgettrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">typ</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">func</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">defargs</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">safe_getattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">*</span><span class="n">defargs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">merge_autodoc_default_flags</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">config</span><span class="p">):</span>
    <span class="c1"># type: (Sphinx, Config) -&gt; None</span>
    <span class="sd">&quot;&quot;&quot;This merges the autodoc_default_flags to autodoc_default_options.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">config</span><span class="o">.</span><span class="n">autodoc_default_flags</span><span class="p">:</span>
        <span class="k">return</span>

    <span class="c1"># Note: this option will be removed in Sphinx-4.0.  But I marked this as</span>
    <span class="c1"># RemovedInSphinx *30* Warning because we have to emit warnings for users</span>
    <span class="c1"># who will be still in use with Sphinx-3.x.  So we should replace this by</span>
    <span class="c1"># logger.warning() on 3.0.0 release.</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s1">&#39;autodoc_default_flags is now deprecated. &#39;</span>
                  <span class="s1">&#39;Please use autodoc_default_options instead.&#39;</span><span class="p">,</span>
                  <span class="n">RemovedInSphinx30Warning</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">option</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">autodoc_default_flags</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">option</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">config</span><span class="o">.</span><span class="n">autodoc_default_options</span><span class="p">[</span><span class="n">option</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
                <span class="n">__</span><span class="p">(</span><span class="s2">&quot;Ignoring invalid option in autodoc_default_flags: </span><span class="si">%r</span><span class="s2">&quot;</span><span class="p">),</span>
                <span class="n">option</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;autodoc&#39;</span>
            <span class="p">)</span>


<span class="kn">from</span> <span class="nn">sphinx.ext.autodoc.mock</span> <span class="k">import</span> <span class="n">_MockImporter</span>  <span class="c1"># NOQA</span>

<span class="n">deprecated_alias</span><span class="p">(</span><span class="s1">&#39;sphinx.ext.autodoc&#39;</span><span class="p">,</span>
                 <span class="p">{</span>
                     <span class="s1">&#39;_MockImporter&#39;</span><span class="p">:</span> <span class="n">_MockImporter</span><span class="p">,</span>
                 <span class="p">},</span>
                 <span class="n">RemovedInSphinx40Warning</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">setup</span><span class="p">(</span><span class="n">app</span><span class="p">):</span>
    <span class="c1"># type: (Sphinx) -&gt; Dict[str, Any]</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">ModuleDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">ClassDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">ExceptionDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">DataDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">FunctionDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">DecoratorDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">MethodDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">AttributeDocumenter</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_autodocumenter</span><span class="p">(</span><span class="n">InstanceAttributeDocumenter</span><span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autoclass_content&#39;</span><span class="p">,</span> <span class="s1">&#39;class&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_member_order&#39;</span><span class="p">,</span> <span class="s1">&#39;alphabetic&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_default_flags&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_default_options&#39;</span><span class="p">,</span> <span class="p">{},</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_docstring_signature&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_mock_imports&#39;</span><span class="p">,</span> <span class="p">[],</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_warningiserror&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_config_value</span><span class="p">(</span><span class="s1">&#39;autodoc_inherit_docstrings&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="s1">&#39;autodoc-process-docstring&#39;</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="s1">&#39;autodoc-process-signature&#39;</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">add_event</span><span class="p">(</span><span class="s1">&#39;autodoc-skip-member&#39;</span><span class="p">)</span>

    <span class="n">app</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;config-inited&#39;</span><span class="p">,</span> <span class="n">merge_autodoc_default_flags</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;version&#39;</span><span class="p">:</span> <span class="n">sphinx</span><span class="o">.</span><span class="n">__display_version__</span><span class="p">,</span> <span class="s1">&#39;parallel_read_safe&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>导航</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="总目录"
             >索引</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python 模块索引"
             >模块</a> |</li>
<li><a href="../../../index.html">主页</a>&#160;|</li>
<li><a href="../../../contents.html">文档</a> &#187;</li>

          <li class="nav-item nav-item-1"><a href="../../index.html" >模块代码</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; 版权所有 2007-2019, Georg Brandl and the Sphinx team.
      由 <a href="http://sphinx-doc.org/">Sphinx</a> 2.1.0+/41035e8f9 创建。
    </div>
  </body>
</html>